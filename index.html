<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeusFas - Crypto Strategy Command Center</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Fira+Code:wght@400;500&display=swap');

        :root {
            --bg-dark: #020617;
            --panel-bg: #0f172a;
            --accent-blue: #38bdf8;
            --accent-gold: #fbbf24;
            --accent-red: #f87171;
            --accent-green: #34d399;
            --accent-purple: #a78bfa;
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            margin: 0;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* ì™¼ìª½: ë§ˆì¼“ ë°ì´í„° */
        .market-section {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            border-right: 1px solid #1e293b;
        }

        /* ì˜¤ë¥¸ìª½: ì „ëµ ì—ì´ì „íŠ¸ ì±„íŒ… */
        .chat-section {
            width: 450px;
            background-color: var(--panel-bg);
            display: flex;
            flex-direction: column;
            box-shadow: -4px 0 15px rgba(0,0,0,0.3);
        }

        h1, h2 {
            margin: 0 0 20px 0;
            letter-spacing: -0.025em;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .card {
            background: #1e293b;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid #334155;
            transition: all 0.2s ease;
        }

        .card:hover { border-color: var(--accent-blue); transform: translateY(-2px); }

        .symbol { font-size: 0.875rem; color: var(--text-dim); font-weight: 600; }
        .price { font-size: 1.5rem; margin: 8px 0; font-family: 'Fira Code', monospace; }
        .change { font-size: 0.875rem; font-weight: 600; }
        .up { color: var(--accent-green); }
        .down { color: var(--accent-red); }

        .table-container {
            background: #1e293b;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #334155;
        }

        table { width: 100%; border-collapse: collapse; font-size: 0.875rem; }
        th { background: #334155; padding: 12px; text-align: left; color: var(--text-dim); position: sticky; top: 0; }
        td { padding: 12px; border-bottom: 1px solid #334155; }

        /* ì±„íŒ… ìŠ¤íƒ€ì¼ */
        .chat-header {
            padding: 20px;
            border-bottom: 1px solid #334155;
            background: #1e293b;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            scroll-behavior: smooth;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 90%;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: #334155;
            flex-shrink: 0;
            border: 1px solid #475569;
        }

        .msg-body {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .msg-sender {
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-dim);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .msg-text {
            background: #1e293b;
            padding: 12px;
            border-radius: 0 12px 12px 12px;
            font-size: 0.9rem;
            line-height: 1.5;
            border: 1px solid #334155;
            white-space: pre-wrap;
        }

        .agent-badge {
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            text-transform: uppercase;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    </style>
</head>
<body>

    <main class="market-section">
        <h1 style="color: var(--accent-blue);">ğŸ¤– DeusFas Market Terminal</h1>
        
        <div class="grid" id="main-cards"></div>

        <h2>ğŸ“Š Real-time Token List</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Price</th>
                        <th>24h Change</th>
                        <th style="text-align: right;">24h Volume</th>
                    </tr>
                </thead>
                <tbody id="token-table"></tbody>
            </table>
        </div>
    </main>

    <aside class="chat-section">
        <div class="chat-header">
            <h2 style="margin: 0; font-size: 1.1rem; color: var(--accent-blue);">ğŸ§  Strategy Discussion</h2>
            <div style="font-size: 0.75rem; color: var(--text-dim);">4-Agent Multi-Agent System Online</div>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- Messages will appear here -->
        </div>
    </aside>

    <script>
        const mainSymbols = [
            { binance: 'BTCUSDT', label: 'BTC' },
            { binance: 'ETHUSDT', label: 'ETH' },
            { binance: 'SOLUSDT', label: 'SOL' },
            { binance: 'BNBUSDT', label: 'BNB' },
            { binance: 'XRPUSDT', label: 'XRP' }
        ];

        const extraSymbols = [
            'ADAUSDT', 'DOGEUSDT', 'DOTUSDT', 'MATICUSDT', 'LINKUSDT', 
            'AVAXUSDT', 'SHIBUSDT', 'TRXUSDT', 'LTCUSDT', 'UNIUSDT',
            'NEARUSDT', 'APTUSDT', 'ARBUSDT', 'OPUSDT', 'SUIUSDT',
            'PEPEUSDT', 'RNDRUSDT', 'FETUSDT', 'INJUSDT', 'TIAUSDT',
            'SEIUSDT', 'ORDIUSDT', 'STXUSDT', 'IMXUSDT', 'BEAMXUSDT',
            'FILUSDT', 'HBARUSDT', 'ATOMUSDT', 'KASUSDT', 'LDOUSDT'
        ];

        const allSymbols = [...mainSymbols.map(s => s.binance), ...extraSymbols];
        const cardsContainer = document.getElementById('main-cards');
        const tableBody = document.getElementById('token-table');
        const chatContainer = document.getElementById('chat-messages');

        const state = { cards: {}, rows: {} };

        // Initialize UI
        mainSymbols.forEach(s => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="symbol">${s.label}</div>
                <div class="price" id="card-p-${s.binance}">$---</div>
                <div class="change" id="card-c-${s.binance}">---%</div>
            `;
            cardsContainer.appendChild(card);
            state.cards[s.binance] = { 
                price: document.getElementById(`card-p-${s.binance}`),
                change: document.getElementById(`card-c-${s.binance}`),
                last: 0 
            };
        });

        extraSymbols.forEach(s => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td style="font-weight: 600; color: var(--accent-blue);">${s.replace('USDT','')}</td>
                <td id="row-p-${s}" style="font-family: 'Fira Code', monospace;">---</td>
                <td id="row-c-${s}">---</td>
                <td id="row-v-${s}" style="text-align: right; color: var(--text-dim);">---</td>
            `;
            tableBody.appendChild(row);
            state.rows[s] = {
                price: document.getElementById(`row-p-${s}`),
                change: document.getElementById(`row-c-${s}`),
                vol: document.getElementById(`row-v-${s}`)
            };
        });

        // Chat System
        const agents = {
            'DeusFas': { name: 'DeusFas (Commander)', color: 'var(--accent-blue)', avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=DeusFas' },
            'Trend': { name: 'TrendAnalyst (Qwen)', color: 'var(--accent-gold)', avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=Qwen' },
            'Risk': { name: 'RiskObserver (Gemma)', color: 'var(--accent-red)', avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=Gemma' },
            'Sentiment': { name: 'Sentiment (Llama)', color: 'var(--accent-purple)', avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=Llama' },
            'Validator': { name: 'Validator (DeepSeek)', color: 'var(--accent-green)', avatar: 'https://api.dicebear.com/7.x/bottts/svg?seed=DeepSeek' }
        };

        function addChatMessage(agentKey, text) {
            const agent = agents[agentKey];
            const msg = document.createElement('div');
            msg.className = 'message';
            msg.innerHTML = `
                <img class="avatar" src="${agent.avatar}" alt="avatar">
                <div class="msg-body">
                    <div class="msg-sender">
                        <span style="color: ${agent.color}">${agent.name}</span>
                        <span class="agent-badge" style="background: ${agent.color}; color: #000">AI AGENT</span>
                    </div>
                    <div class="msg-text">${text}</div>
                </div>
            `;
            chatContainer.appendChild(msg);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        // WebSocket
        const socket = new WebSocket('wss://stream.binance.com:9443/ws/' + allSymbols.map(s => s.toLowerCase() + '@ticker').join('/'));

        socket.onmessage = (e) => {
            const d = JSON.parse(e.data);
            const s = d.s;
            const p = parseFloat(d.c).toLocaleString(undefined, { minimumFractionDigits: s.includes('SHIB') ? 6 : 2 });
            const c = parseFloat(d.P).toFixed(2);
            const v = (parseFloat(d.q) / 1000000).toFixed(1) + 'M';

            if (state.cards[s]) {
                const item = state.cards[s];
                item.price.innerText = `$${p}`;
                item.change.innerText = `${c >= 0 ? '+' : ''}${c}%`;
                item.change.className = `change ${c >= 0 ? 'up' : 'down'}`;
                
                const cur = parseFloat(d.c);
                if (cur > item.last) item.price.style.color = 'var(--accent-green)';
                else if (cur < item.last) item.price.style.color = 'var(--accent-red)';
                setTimeout(() => { item.price.style.color = 'var(--text-main)'; }, 300);
                item.last = cur;
            }

            if (state.rows[s]) {
                const item = state.rows[s];
                item.price.innerText = `$${p}`;
                item.change.innerText = `${c >= 0 ? '+' : ''}${c}%`;
                item.change.style.color = c >= 0 ? 'var(--accent-green)' : 'var(--accent-red)';
                item.vol.innerText = `$${v}`;
            }
        };

        // Welcome Messages
        setTimeout(() => addChatMessage('DeusFas', 'ì´ì±…ì„ì ë“€ìŠ¤íŒŒìŠ¤ì…ë‹ˆë‹¤. ì²œë§ˆë‹˜ PCì˜ ë¡œì»¬ LLM êµ°ë‹¨ì´ ëª¨ë‘ ì •ìƒ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ëµ íšŒì˜ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤.'), 1000);
        setTimeout(() => addChatMessage('Trend', 'Qwen 2.5 ë³´ê³ í•©ë‹ˆë‹¤. í˜„ì¬ BTC íš¡ë³´ ëŒíŒŒ ì‹œì ì„ í¬ì°©í•˜ê¸° ìœ„í•´ ê¸°ìˆ ì  ì§€í‘œë¥¼ ì •ë°€ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤.'), 3000);
        setTimeout(() => addChatMessage('Risk', 'Gemma 2ì…ë‹ˆë‹¤. í˜„ì¬ ë‹¨ê¸° ë³€ë™ì„± ì§€í‘œê°€ ìƒìŠ¹ ì¤‘ì…ë‹ˆë‹¤. ë¬´ë¦¬í•œ ì§„ì…ë³´ë‹¤ëŠ” ê´€ë§ì„ ì œì•ˆí•©ë‹ˆë‹¤.'), 5000);
        setTimeout(() => addChatMessage('Sentiment', 'Llama 3.1ì…ë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹° ë° ê³ ë˜ ì§€ê°‘ ì´ë™ ë¶„ì„ ê²°ê³¼, ë§¤ìˆ˜ ì‹¬ë¦¬ê°€ ì„œì„œíˆ íšŒë³µë˜ê³  ìˆìŠµë‹ˆë‹¤.'), 7000);
        setTimeout(() => addChatMessage('Validator', 'DeepSeek R1ì…ë‹ˆë‹¤. ì•ì„  ë¶„ì„ë“¤ì„ ì¢…í•©í•˜ì—¬ ìµœì ì˜ ì†ìµë¹„ë¥¼ ê³„ì‚°í•˜ê³  ì „ëµì˜ íƒ€ë‹¹ì„±ì„ ê²€ì¦í•˜ê² ìŠµë‹ˆë‹¤.'), 9000);

    </script>
</body>
</html>
